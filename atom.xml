<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>一抹阳光 - qirenji.info</title>
  <subtitle>IT技术分享</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.qirenji.info/"/>
  <updated>2017-07-19T14:27:02.000Z</updated>
  <id>http://www.qirenji.info/</id>
  
  <author>
    <name>Qi Renji</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vue项目部署阿里云</title>
    <link href="http://www.qirenji.info/2017/07/19/Vue%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    <id>http://www.qirenji.info/2017/07/19/Vue项目部署阿里云/</id>
    <published>2017-07-19T14:06:29.000Z</published>
    <updated>2017-07-19T14:27:02.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue项目部署到阿里云服务器"><a href="#Vue项目部署到阿里云服务器" class="headerlink" title="Vue项目部署到阿里云服务器"></a>Vue项目部署到阿里云服务器</h1><p>文章适合初学vue项目想部署到服务上的。</p>
<h2 id="一、文件准备"><a href="#一、文件准备" class="headerlink" title="一、文件准备"></a>一、文件准备</h2><p>首先准备好要发布的前后台文件</p>
<h3 id="前端文件"><a href="#前端文件" class="headerlink" title="前端文件"></a>前端文件</h3><p>如是使用vue-cli搭建，在vue项目中使用如下命令生成</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">run</span><span class="bash"> build</span></div></pre></td></tr></table></figure>
<p>可以看到在本地多出来一个dist文件，此文件为压缩后文件，可直接部署到服务器</p>
<h3 id="后端文件"><a href="#后端文件" class="headerlink" title="后端文件"></a>后端文件</h3><p>可以简单编写一个，或由后端同学提供<br>这里给出一个nodejs的小例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> port = process.env.PORT || <span class="number">3000</span>;</div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"></div><div class="line">app.use(express.static(<span class="string">'./dist'</span>));</div><div class="line"></div><div class="line">app.get(<span class="string">"/"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</div><div class="line">	res.render(<span class="string">'index.html'</span>,&#123;&#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = app.listen(port, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span> (err) &#123;</div><div class="line">		<span class="built_in">console</span>.log(err);</div><div class="line">		<span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'Listening at http://localhost:'</span> + port + <span class="string">'\n'</span>)</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>这里后端端口号使用3000端口。</p>
<h2 id="二-关联文件"><a href="#二-关联文件" class="headerlink" title="二. 关联文件"></a>二. 关联文件</h2><ul>
<li><p>把前后端文件放入一个文件夹中，添加至github或码云等仓库</p>
</li>
<li><p>在git上添加服务器和本地的ssh。</p>
</li>
<li><p>服务器和本地都需安装pm2</p>
</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> pm2 -g</div></pre></td></tr></table></figure>
<p>这样就可以通过github把本地和服务器关联起来。</p>
<p>在服务器端的/www文件夹下，创建项目文件夹，并修改其权限，简单简单修改为 </p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> <span class="string">/www</span></div><div class="line"></div><div class="line">sudo chmod 777 cnode</div></pre></td></tr></table></figure>
<h2 id="三-修改阿里云安全组"><a href="#三-修改阿里云安全组" class="headerlink" title="三. 修改阿里云安全组"></a>三. 修改阿里云安全组</h2><p>登陆到阿里云服务器管理页面，找到安全组，添加项目中所需要的安全组的端口号。</p>
<h2 id="四-修改服务器防火墙"><a href="#四-修改服务器防火墙" class="headerlink" title="四. 修改服务器防火墙"></a>四. 修改服务器防火墙</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//修改防火墙 </span></div><div class="line">sudo vi /etc/iptables<span class="selector-class">.up</span><span class="selector-class">.rules</span></div></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//重启防火墙</span></div><div class="line">sudo iptables-restore &lt; /etc/iptables<span class="selector-class">.up</span><span class="selector-class">.rules</span></div></pre></td></tr></table></figure>
<h2 id="五-编写ecosystem文件"><a href="#五-编写ecosystem文件" class="headerlink" title="五. 编写ecosystem文件"></a>五. 编写ecosystem文件</h2><p>本地编写ecosystem.json文件。如下</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"apps"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"name"</span>: <span class="string">"cnode"</span>,</div><div class="line">      <span class="attr">"script"</span>: <span class="string">"server.js"</span>,</div><div class="line">      <span class="attr">"env"</span>: &#123;</div><div class="line">        <span class="attr">"COMMON_VARIABLE"</span>: <span class="string">"true"</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">"env_production"</span>: &#123;</div><div class="line">        <span class="attr">"NODE_ENV"</span>: <span class="string">"production"</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="attr">"deploy"</span>: &#123;</div><div class="line">    <span class="attr">"production"</span>: &#123;</div><div class="line">      <span class="attr">"user"</span>: <span class="string">"服务器用户名"</span>,</div><div class="line">      <span class="attr">"host"</span>: [<span class="string">"你的服务器ip"</span>],</div><div class="line">      <span class="attr">"port"</span>: <span class="string">"服务器端口号"</span>,</div><div class="line">      <span class="attr">"ref"</span>: <span class="string">"origin/master"</span>,</div><div class="line">      <span class="attr">"repo"</span>: <span class="string">"gtihub或码云的对应项目ssh地址"</span>,</div><div class="line">      <span class="attr">"path"</span>: <span class="string">"/www/cnode/production"</span>,</div><div class="line">      <span class="attr">"ssh_options"</span>: <span class="string">"StrictHostKeyChecking=no"</span>,</div><div class="line">      <span class="attr">"post-deploy"</span>: <span class="string">"npm install --registry=https://registry.npm.taobao.org &amp;&amp; pm2 startOrRestart ecosystem.json --env production"</span>,</div><div class="line">      <span class="attr">"env"</span>: &#123;</div><div class="line">        <span class="attr">"NODE_ENV"</span>: <span class="string">"production"</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后本地执行</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pm2 deploy ecosystem<span class="selector-class">.json</span> production resetup</div></pre></td></tr></table></figure>
<p>看到Success说明部署成功。</p>
<p>以后每次服务器更新只需提交到github执行上述代码即可</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Vue项目部署到阿里云服务器&quot;&gt;&lt;a href=&quot;#Vue项目部署到阿里云服务器&quot; class=&quot;headerlink&quot; title=&quot;Vue项目部署到阿里云服务器&quot;&gt;&lt;/a&gt;Vue项目部署到阿里云服务器&lt;/h1&gt;&lt;p&gt;文章适合初学vue项目想部署到服务上的。&lt;/
    
    </summary>
    
      <category term="建站" scheme="http://www.qirenji.info/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
      <category term="Vue" scheme="http://www.qirenji.info/tags/Vue/"/>
    
      <category term="项目部署" scheme="http://www.qirenji.info/tags/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>hexo搭建github个人博客</title>
    <link href="http://www.qirenji.info/2017/07/18/hexo%E6%90%AD%E5%BB%BAgithub%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>http://www.qirenji.info/2017/07/18/hexo搭建github个人博客/</id>
    <published>2017-07-18T15:41:11.000Z</published>
    <updated>2017-07-19T14:33:19.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="用Hexo-3-搭建github-blog"><a href="#用Hexo-3-搭建github-blog" class="headerlink" title="用Hexo 3 搭建github blog"></a>用Hexo 3 搭建github blog</h1><p>本文使用的是Mac进行演示，如过是windows系统方式基本相同，单具体安装步骤请自行百度。</p>
<h2 id="一-注册github账号"><a href="#一-注册github账号" class="headerlink" title="一. 注册github账号"></a>一. 注册github账号</h2><p>点击gitbub<a href="http://github.com/" target="_blank" rel="external">官方网站</a>进行注册</p>
<h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><p>注册完成后点击github首页上的➕New repository创建仓库</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/github-create.png" alt="image" title="">
                </div>
                <div class="image-caption">image</div>
            </figure>
<p>创建的Repository name有固定的格式<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">你的github昵称<span class="selector-class">.github</span><span class="selector-class">.io</span></div></pre></td></tr></table></figure></p>
<p>点击Creat repository即可创建仓库</p>
<h3 id="生成添加秘钥"><a href="#生成添加秘钥" class="headerlink" title="生成添加秘钥"></a>生成添加秘钥</h3><p>打开终端输入：</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -<span class="built_in">t</span> rsa -C <span class="string">"Github的注册邮箱地址"</span></div></pre></td></tr></table></figure>
<p>一路Enter过来就好，待秘钥生成完毕，会得到两个文件id_rsa和id_rsa.pub</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat ~<span class="regexp">/.ssh/i</span>d_rsa.pub</div></pre></td></tr></table></figure>
<p>查看公钥并复制其内容。</p>
<p><a href="http://github.com/settings/keys" target="_blank" rel="external">http://github.com/settings/ssh</a></p>
<p>New SSH key<br>输入一个Title把刚才查看到的公钥输入到Key上，生成SSH key。</p>
<h2 id="二-node-js-和git安装"><a href="#二-node-js-和git安装" class="headerlink" title="二.node.js 和git安装"></a>二.node.js 和git安装</h2><p>进入<a href="http://nodejs.cn/download//" target="_blank" rel="external">node.js官网</a>，下载并安装即可，推荐安装新版。</p>
<hr>
<p>git安装可用过homebrew安装，首先安装homebrew</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/<span class="keyword">install</span>/<span class="keyword">master</span>/<span class="keyword">install</span>)<span class="string">"</span></div></pre></td></tr></table></figure>
<p>然后安装git</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">brew </span><span class="keyword">install </span>git</div></pre></td></tr></table></figure>
<h2 id="三-安装hexo"><a href="#三-安装hexo" class="headerlink" title="三.安装hexo"></a>三.安装hexo</h2><p>强调一下，这一步使我们搭建博客的核心，是重中之重。</p>
<h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> npm install -g hexo-cli</span></div></pre></td></tr></table></figure>
<p>安装好之后，终端输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> hexo</span></div></pre></td></tr></table></figure>
<p>若出现下图，说明hexo安装成功</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/291600-34e4d1af45d6f267.png?imageMogr2/auto-orient/strip%7CimageView2/2" alt="image" title="">
                </div>
                <div class="image-caption">image</div>
            </figure>
<h3 id="初始化博客"><a href="#初始化博客" class="headerlink" title="初始化博客"></a>初始化博客</h3><p>着到你创建博客的目录，创建博客文件夹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 创建博客文件夹，并初始化博客</div><div class="line"><span class="meta">$</span><span class="bash"> hexo init &lt;folder&gt;</span></div><div class="line">//进入博客文件夹</div><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> &lt;folder&gt;</span></div><div class="line">//安装所有的依赖包</div><div class="line"><span class="meta">$</span><span class="bash"> npm install</span></div></pre></td></tr></table></figure>
<h2 id="四-修改博客主题和配置"><a href="#四-修改博客主题和配置" class="headerlink" title="四.修改博客主题和配置"></a>四.修改博客主题和配置</h2><ul>
<li>先下载<a href="http://hexo.in/themes/" target="_blank" rel="external">主题</a>到themes文件夹中</li>
<li>修改_config.yml文件中themes项为自己的主题名</li>
<li>修改_config.yml文件中的deploy项如下</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">deploy</span>:</div><div class="line">  <span class="attribute">type</span>: git</div><div class="line">  <span class="attribute">repo</span>: <span class="attribute">https</span>:<span class="comment">//github.com/你的昵称/你的昵称.github.io.git</span></div><div class="line">  <span class="attribute">branch</span>: master</div></pre></td></tr></table></figure>
<h2 id="五-新建文章并发布"><a href="#五-新建文章并发布" class="headerlink" title="五.新建文章并发布"></a>五.新建文章并发布</h2><p>在博客根文件夹下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> hexo n <span class="string">"文章名称"</span></span></div></pre></td></tr></table></figure>
<p>可以看到在source/_post/文件夹看到新建的.md文件<br>可以在其结尾处添加一些内容，方便我们测试。<br>输入<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> hexo g</span></div></pre></td></tr></table></figure></p>
<p>生成我们要发布的文件，在发布之前我们可以通过</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> hexo s</span></div></pre></td></tr></table></figure>
<p>然后打开浏览器输入<a href="http://localhost:4000/" target="_blank" rel="external">localhost:4000</a>,查看文章。<br>现在只是在本地跑起来来，还需要把程序托管到github上。</p>
<p>首先来到 <a href="https://github.com/你的昵称/你的昵称.github.io/settings" target="_blank" rel="external">https://github.com/你的昵称/你的昵称.github.io/settings</a> 进行github pages页进行设置，选择source为master分支，点击save即可</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/github-pages.png" alt="image" title="">
                </div>
                <div class="image-caption">image</div>
            </figure>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//安装hexo git插件</span></div><div class="line"><span class="symbol">$</span> npm install hexo-deployer-git --save</div><div class="line"><span class="comment">//部署到github</span></div><div class="line"><span class="symbol">$</span> hexo g</div></pre></td></tr></table></figure>
<p>这样就可通过 你的昵称.github.io 来访问我们的博客了</p>
<h2 id="六-关联域名"><a href="#六-关联域名" class="headerlink" title="六.关联域名"></a>六.关联域名</h2><p>首先去万网，godaddy等域名系统来购买一个域名。<br>这里我买的是godaddy的域名。购买完成后进入到 管理DNS 关联github</p>
<p> <img src="/img/hexo-dns.png" alt="image"></p>
<p>然后再去github pages页设置Custom domain选项为你买的域名。<br>关联成功后等待几分钟，就可以通过域名访问你的hexo博客来。</p>
<h2 id="七-其他"><a href="#七-其他" class="headerlink" title="七.其他"></a>七.其他</h2><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">hexo常用命令</div><div class="line">hexo n <span class="string">"我的博客"</span>==hexo new <span class="string">"我的博客"</span><span class="comment">#新建文章</span></div><div class="line">hexo <span class="attr">p==hexo</span> publish</div><div class="line">hexo <span class="attr">g==hexo</span> generate<span class="comment">#生成</span></div><div class="line">hexo <span class="attr">s==hexo</span> server<span class="comment">#启动服务预览</span></div><div class="line">hexo <span class="attr">d==hexo</span> deploy<span class="comment">#部署</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;用Hexo-3-搭建github-blog&quot;&gt;&lt;a href=&quot;#用Hexo-3-搭建github-blog&quot; class=&quot;headerlink&quot; title=&quot;用Hexo 3 搭建github blog&quot;&gt;&lt;/a&gt;用Hexo 3 搭建github blog&lt;/
    
    </summary>
    
      <category term="建站" scheme="http://www.qirenji.info/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
      <category term="hexo" scheme="http://www.qirenji.info/tags/hexo/"/>
    
      <category term="个人博客" scheme="http://www.qirenji.info/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
</feed>
